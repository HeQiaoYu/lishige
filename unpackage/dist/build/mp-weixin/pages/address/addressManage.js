(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"0beb":function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=e("302f"),n={data:function(){return{addressData:{realname:"",mobile:"",addressName:"在地图选择",address:"",area:"",default:!1,lng:"",lat:"",id:0}}},onLoad:function(t){var e="添加收货地址";"edit"===t.type&&(e="编辑收货地址",this.addressData=JSON.parse(t.data)),this.manageType=t.type,a.setNavigationBarTitle({title:e})},methods:{switchChange:function(a){this.addressData.default=a.detail},chooseLocation:function(){var t=this,e=this;a.chooseLocation({success:function(a){t.addressData.addressName=a.address,t.addressData.address=a.address,t.addressData.area=a.name,t.addressData.lng=a.longitude,t.addressData.lat=a.latitude},fail:function(){a.getSetting({success:function(t){var s=t.authSetting;console.log(s),s["scope.userLocation"]||(console.log(123),a.showModal({title:"是否授权当前位置",content:"需要获取您的地理位置，请确认授权，否则地图功能将无法使用",success:function(t){t.confirm?a.openSetting({success:function(t){!0===t.authSetting["scope.userLocation"]&&(a.showToast({title:"授权成功",icon:"success",duration:1e3}),setTimeout((function(){a.chooseLocation({success:function(a){e.addressData.addressName=a.address,e.addressData.address=a.address,e.addressData.area=a.name,e.addressData.lng=a.longitude,e.addressData.lat=a.latitude}})}),1e3))}}):a.showToast({title:"授权失败",icon:"none",duration:1e3})}}))}})}})},confirm:function(){var t=this,e=this.addressData;e.realname?/(^1[3|4|5|7|8][0-9]{9}$)/.test(e.mobile)?e.address?e.area?(0,s.userAddressAdd)(e).then((function(s){t.addressData.id=s.addressid,t.$api.prePage().refreshList(e,t.manageType),t.$api.msg("地址".concat("edit"==t.manageType?"修改":"添加","成功")),setTimeout((function(){a.navigateBack()}),800)})):this.$api.msg("请填写门牌号信息"):this.$api.msg("请在地图选择所在位置"):this.$api.msg("请输入正确的手机号码"):this.$api.msg("请填写收货人姓名")},onNavigationBarButtonTap:function(t){var e=this,n=this.addressData.id;(0,s.userAddressDelete)(n).then((function(t){e.$api.prePage().getAddress(),a.showToast({title:"删除成功",success:function(){a.navigateBack()}})})).catch((function(a){}))}}};t.default=n}).call(this,e("543d")["default"])},"43d7":function(a,t,e){"use strict";(function(a){e("969c");s(e("66fd"));var t=s(e("cf09"));function s(a){return a&&a.__esModule?a:{default:a}}a(t.default)}).call(this,e("543d")["createPage"])},"844f":function(a,t,e){"use strict";var s,n=function(){var a=this,t=a.$createElement;a._self._c},d=[];e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return d})),e.d(t,"a",(function(){return s}))},ab8c:function(a,t,e){"use strict";e.r(t);var s=e("0beb"),n=e.n(s);for(var d in s)"default"!==d&&function(a){e.d(t,a,(function(){return s[a]}))}(d);t["default"]=n.a},cf09:function(a,t,e){"use strict";e.r(t);var s=e("844f"),n=e("ab8c");for(var d in n)"default"!==d&&function(a){e.d(t,a,(function(){return n[a]}))}(d);e("f25a");var i,o=e("f0c5"),r=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],i);t["default"]=r.exports},f25a:function(a,t,e){"use strict";var s=e("fdd6"),n=e.n(s);n.a},fdd6:function(a,t,e){}},[["43d7","common/runtime","common/vendor"]]]);