<view class="container"><block wx:if="{{!hasLogin||empty===true}}"><view class="empty"><image src="/static/emptyCart.jpg" mode="aspectFit"></image><block wx:if="{{hasLogin}}"><view class="empty-tips">空空如也<block wx:if="{{hasLogin}}"><navigator class="navigator" url="../index/index" open-type="switchTab">随便逛逛></navigator></block></view></block><block wx:else><view class="empty-tips">空空如也<view data-event-opts="{{[['tap',[['navToLogin',['$event']]]]]}}" class="navigator" bindtap="__e">去登陆></view></view></block></view></block><block wx:else><view><view class="youhuiBox"><block wx:for="{{merch_list}}" wx:for-item="item" wx:for-index="index" wx:key="merchid"><view class="yhItem myOdItem"><view class="odShop flexBox between"><view data-event-opts="{{[['tap',[['check',['item',index]]]]]}}" class="{{['yticon icon-xuanzhong2 cartItemIcon',(item.selected)?'checked':'']}}" bindtap="__e"></view><view class="proXqShop-int flexBox odShop-int"><uni-icons class="odShop-icon" vue-id="{{'1775f8c0-1-'+index}}" type="shop" bind:__l="__l"></uni-icons><view class="proShop-int flexBox"><view class="proShop-title ellipsis-1">{{item.merchname?item.merchname:'自营商品'}}</view><uni-icons vue-id="{{'1775f8c0-2-'+index}}" type="arrowright" bind:__l="__l"></uni-icons></view></view><view data-event-opts="{{[['tap',[['delectCartlist',[index]]]]]}}" class="proXqShop-jt" bindtap="__e"><uni-icons vue-id="{{'1775f8c0-3-'+index}}" type="trash" bind:__l="__l"></uni-icons></view></view><block wx:for="{{item.list}}" wx:for-item="val" wx:for-index="key"><view class="indProItem uni-media-list odProItem"><view class="indProIt-image odProIt-image flexBox"><view data-event-opts="{{[['tap',[['selected',[['o',['id',val.id],['select',val.selected]]]]]]]}}" class="{{['yticon icon-xuanzhong2 cartItemIcon',(val.selected==1?true:false)?'checked':'']}}" bindtap="__e"></view><view><image src="{{val.thumb}}" mode="aspectFill" lazy-load="{{true}}" data-event-opts="{{[['load',[['onImageLoad',['cartList',index]]]],['error',[['onImageError',['cartList',index]]]]]}}" bindload="__e" binderror="__e"></image></view></view><view class="indProIt-int uni-media-list-body"><view><view class="indPro-tit ellipsis-2">{{val.title}}</view><block wx:if="{{val.optionid!=0}}"><view class="gwcGg flexBox fl"><text>{{val.optiontitle}}</text><uni-icons vue-id="{{'1775f8c0-4-'+index+'-'+key}}" type="arrowdown" bind:__l="__l"></uni-icons></view></block><view class="clear"></view></view><view class="indPro-dibu flexBox between"><view class="indPro-money"><text class="indProPri"><text class="indProPriSml">￥</text>{{val.marketprice}}</text></view><uni-number-box class="step" vue-id="{{'1775f8c0-5-'+index+'-'+key}}" min="{{1}}" max="{{val.totalmaxbuy}}" value="{{val.cart_number>val.totalmaxbuy?val.totalmaxbuy:val.cart_number}}" isMax="{{val.cart_number>=val.totalmaxbuy?true:false}}" isMin="{{val.cart_number===1}}" cartid="{{val.id}}" optionid="{{val.optionid}}" data-event-opts="{{[['^eventChange',[['number',['$event']]]]]}}" bind:eventChange="__e" bind:__l="__l"></uni-number-box></view></view></view></block></view></block></view><view class="cart-list"><block wx:for="{{list}}" wx:for-item="item" wx:for-index="index" wx:key="id"><block><view class="{{['cart-item',(index!==list.length-1)?'b-b':'']}}"><view class="image-wrapper"><image class="{{[item.loaded]}}" src="{{item.thumb}}" mode="aspectFill" lazy-load="{{true}}" data-event-opts="{{[['load',[['onImageLoad',['list',index]]]],['error',[['onImageError',['list',index]]]]]}}" bindload="__e" binderror="__e"></image><view data-event-opts="{{[['tap',[['selected',[['o',['id',item.id],['select',item.selected]]]]]]]}}" class="{{['yticon icon-xuanzhong2 checkbox',(item.selected==1?true:false)?'checked':'']}}" bindtap="__e"></view></view><view class="item-right"><text class="clamp title">{{item.title}}</text><text class="attr">{{item.optiontitle}}</text><text class="price">{{"¥"+item.marketprice}}</text><uni-number-box class="step" vue-id="{{'1775f8c0-6-'+index}}" min="{{1}}" max="{{item.totalmaxbuy}}" value="{{item.cart_number>item.totalmaxbuy?item.totalmaxbuy:item.cart_number}}" isMax="{{item.cart_number>=item.totalmaxbuy?true:false}}" isMin="{{item.cart_number===1}}" index="{{index}}" cartid="{{item.id}}" optionid="{{item.optionid}}" data-event-opts="{{[['^eventChange',[['number']]]]}}" bind:eventChange="__e" bind:__l="__l"></uni-number-box></view><text data-event-opts="{{[['tap',[['deleteCartItem',['$0'],['id']]]]]}}" class="del-btn yticon icon-fork" bindtap="__e"></text></view></block></block></view><view class="action-section"><view data-event-opts="{{[['tap',[['checkall',['$event']]]]]}}" class="checkbox flexBox" bindtap="__e"><view class="{{['yticon icon-xuanzhong2 cartItemIcon',ischeckall?'checked':'']}}"></view>全选</view><view class="total-box">合计：<text class="price">{{"¥"+totalprice}}</text></view><button class="no-border confirm-btn" type="primary" data-event-opts="{{[['tap',[['createOrder',['$event']]]]]}}" bindtap="__e">结算</button></view></view></block></view>