(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{1628:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("4d01");d(i("411c")),i("7638");function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={data:function(){return{maskState:0,desc:"",payType:1,couponList:[{title:"新用户专享优惠券",price:5},{title:"庆五一发一波优惠券",price:10},{title:"优惠券优惠券优惠券优惠券",price:15}],data:{dispatchtype:0,remark:""},addressData:{},list:[],alldownprice:0,active:0,merchid:0,coupon:{deductprice:0}}},onLoad:function(e){var t=this;t.options=e,t.createOrder()},methods:{navClick:function(e){this.active=e,this.caculate(this.list)},caculate:function(e){var t=this,i=this,r=0;i.data&&0!=i.data.couponid&&(r=i.data.couponid),(0,a.createcaculate)(i.convertModelToFormData({goods:i.goodslist,dflag:i.active,addressid:i.list.address?i.list.address.id:0,packageid:i.list.packageid,bargain_id:i.options.bargainid,discountprice:i.list.discountprice,cardid:i.cardid,couponid:r})).then((function(r){e.dispatch_price=r.price,e.enoughdeduct=r.deductenough_money,e.enoughmoney=r.deductenough_enough,e.taskdiscountprice=r.taskdiscountprice,e.discountprice=r.discountprice,e.isdiscountprice=r.isdiscountprice,e.seckill_price=r.seckill_price,e.deductcredit2=r.deductcredit2,e.deductmoney=r.deductmoney,e.deductcredit=r.deductcredit,e.gifts=r.gifts,i.data.deduct&&(r.realprice-=r.deductmoney),i.data.deduct2&&(r.realprice-=r.deductcredit2),i.coupon&&void 0!==i.coupon.deductprice&&(i.$set(i.coupon,"deductprice",r.coupon_deductprice),r.realprice-=r.coupon_deductprice),r.card_info&&(e.card_free_dispatch=r.card_free_dispatch),0==i.goods.giftid&&i.$set(t.goods,"gifts",r.gifts),e.realprice<=0&&(e.realprice=1e-6),e.realprice=r.realprice.toFixed(2),"-0.00"==e.realprice&&(e.realprice=0),i.list=e,i.cardid=r.card_info.cardid,i.cardname=r.card_info.cardname,i.goodsprice=r.card_info.goodsprice?r.card_info.goodsprice:0,i.carddiscountprice=r.card_info.carddiscountprice,i.city_express_state=r.city_express_state}))},createOrder:function(){var e=this,t=[];t=e.options,(0,a.createOrder)(t).then((function(t){var i=(e.originalprice-t.goodsprice).toFixed(2);if(t.address){var r={realname:t.address.realname,mobile:t.address.mobile,addressName:t.address.province+t.address.city+t.address.area+t.address.street,address:t.address.province+t.address.city+t.address.area+t.address.street,area:t.address.address,default:"1"==t.address.isdefault,lng:t.address.lng,lat:t.address.lat,id:t.address.id};e.addressData=r}e.list=t,e.goods=t,e.goodslist=e.getGoodsList(t.goods),e.merchid=t.merchid,e.card_info=t.card_info||{},e.cardid=t.card_info.cardid||"",e.cardname=t.card_info.cardname||"",e.carddiscountprice=t.card_info.carddiscountprice,e.comboprice=i,e.city_express_state=t.city_express_state,e.cycelbuy_showdate=t.selectDate,e.receipttime=t.receipttime,e.iscycel=t.iscycel,e.scope=t.scope,e.fromquick=t.fromquick,e.hasinvoice=t.hasinvoice,e.credittext=t.sysset.texts.credit}))},toggleMask:function(e){var t=this,i="show"===e?10:300,r="show"===e?1:0;this.maskState=2,setTimeout((function(){t.maskState=r}),i)},numberChange:function(e){this.number=e.number},changePayType:function(e){this.payType=e},submit:function(){var t,i=this,r=i.goods.giftid||i.giftid,d=(t={id:i.options.goodsid?i.options.goodsid:0,goods:i.goodslist,gdid:i.options.gdid,dispatchtype:i.active,fromcart:i.list.fromcart,carrierid:1==i.active&&i.list.carrierInfo?i.list.carrierInfo.id:0,addressid:i.list.address?i.list.address.id:0,carriers:1==i.active||i.list.isvirtual||i.list.isverify?{carrier_realname:i.list.member.realname,carrier_mobile:i.list.member.mobile,realname:i.list.carrierInfo.realname,mobile:i.list.carrierInfo.mobile,storename:i.list.carrierInfo.storename,address:i.list.carrierInfo.address}:"",remark:i.data.remark,deduct:i.data.deduct,deduct2:i.data.deduct2,couponid:i.data.couponid,cardid:i.cardid,invoicename:i.list.invoicename,submit:!0,packageid:i.list.packageid,giftid:r,receipttime:i.receipttime,bargain_id:i.options.bargainid,fromquick:i.fromquick},c(t,"addressid",i.addressData.id),c(t,"isverify",i.active),t);d=i.convertModelToFormData(d),(0,a.orderSubmit)(d).then((function(t){e.redirectTo({url:"/pages/money/pay?orderid=".concat(t.orderid)})}))},convertModelToFormData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Object,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("undefined"!==typeof e&&null!==e)if(e instanceof Date)t[i]=e.toISOString();else if(e instanceof Array)for(var r=0;r<e.length;r++)this.convertModelToFormData(e[r],t,i+"["+r+"]");else if("object"===typeof e)for(var a in e)e.hasOwnProperty(a)&&this.convertModelToFormData(e[a],t,i?i+"["+a+"]":a);else t[i]=e.toString();return t},dataChange:function(e){var t=this.data,i=this.list;switch(e.target.id){case"remark":t.remark=e.detail.value;break;case"deduct":if(t.deduct=e.detail.value,t.deduct2)return;var a=parseFloat(i.realprice);a+=t.deduct?-parseFloat(i.deductmoney):parseFloat(i.deductmoney),i.realprice=a;break;case"deduct2":if(t.deduct2=e.detail.value,t.deduct)return;a=parseFloat(i.realprice),a+=t.deduct2?-parseFloat(i.deductcredit2):parseFloat(i.deductcredit2),i.realprice=a}i.realprice<=0&&(i.realprice=1e-6),i.realprice=r.toFixed(i.realprice,2),this.$set(this,"data",t),this.$set(this,"list",i)},stopPrevent:function(){},getGoodsList:function(e){var t=[];e.map((function(e){e.goods.map((function(e){t.push(e)}))}));for(var i=0,r=0;r<t.length;r++)i+=t[r].price;return this.originalprice=i,t}}};t.default=o}).call(this,i("543d")["default"])},4471:function(e,t,i){"use strict";var r=i("5149"),a=i.n(r);a.a},5149:function(e,t,i){},"6fe8":function(e,t,i){"use strict";(function(e){i("969c");r(i("66fd"));var t=r(i("8bf1"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"8bf1":function(e,t,i){"use strict";i.r(t);var r=i("cf6e"),a=i("93f2");for(var d in a)"default"!==d&&function(e){i.d(t,e,(function(){return a[e]}))}(d);i("4471");var c,o=i("f0c5"),s=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],c);t["default"]=s.exports},"93f2":function(e,t,i){"use strict";i.r(t);var r=i("1628"),a=i.n(r);for(var d in r)"default"!==d&&function(e){i.d(t,e,(function(){return r[e]}))}(d);t["default"]=a.a},cf6e:function(e,t,i){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},d=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return d})),i.d(t,"a",(function(){return r}))}},[["6fe8","common/runtime","common/vendor"]]]);