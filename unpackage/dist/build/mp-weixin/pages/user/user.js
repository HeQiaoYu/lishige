(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{2244:function(n,e,t){"use strict";t.r(e);var o=t("766e"),i=t("32e9");for(var r in i)"default"!==r&&function(n){t.d(e,n,(function(){return i[n]}))}(r);t("b318");var c,s=t("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=u.exports},"32e9":function(n,e,t){"use strict";t.r(e);var o=t("92d2"),i=t.n(o);for(var r in o)"default"!==r&&function(n){t.d(e,n,(function(){return o[n]}))}(r);e["default"]=i.a},"34d2":function(n,e,t){"use strict";(function(n){t("969c");o(t("66fd"));var e=o(t("2244"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},"6c5d":function(n,e,t){},"766e":function(n,e,t){"use strict";var o={uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"ceb7"))},uniPopup:function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"7407"))}},i=function(){var n=this,e=n.$createElement;n._self._c},r=[];t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return o}))},"92d2":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("302f"),i=t("2f62");function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){s(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var u=function(){t.e("components/mix-list-cell").then(function(){return resolve(t("0672"))}.bind(null,t)).catch(t.oe)},a=function(){t.e("components/uni-popup/uni-popup").then(function(){return resolve(t("7407"))}.bind(null,t)).catch(t.oe)},f=0,l=0,p=!0,d={components:{listCell:u,uniPopup:a},data:function(){return{coverTransform:"translateY(0px)",coverTransition:"0s",moving:!1,userInfo:{credit2:0,credit1:0,credittext:"积分",moneytext:"余额"},userFeedbackHidden:!0,show:!0,hasLogin:this.$store.state.app.hasLogin,logininfo:{},userfavorite:0}},onLoad:function(){},onShow:function(){this.hasLogin=this.$store.state.app.hasLogin,this.setSessionKey(),this.$store.state.app.hasLogin&&(this.hasLogin=!0,this.User())},computed:{},methods:c({},(0,i.mapMutations)(["LOGIN"]),{User:function(){var n=this,e=this;(0,o.getUser)().then((function(t){e.userInfo=t,""==t.mobile&&n.$refs.popup.open(),(0,o.userfavorite)().then((function(n){e.userfavorite=n.total}))})).catch((function(n){}))},scan:function(){n.scanCode({success:function(e){console.log("条码类型："+e.scanType),console.log("条码内容："+e.result),n.navigateTo({url:"/pages/order/orderCancelAv"+e.result})}})},getphone:function(e){var t=this,i={data:e.detail.encryptedData,iv:e.detail.iv,sessionKey:this.logininfo.session_key};(0,o.decodephone)(i).then((function(e){(0,o.bindPhone)(e.phoneNumber).then((function(e){n.showToast({title:"绑定成功"}),t.User()})),t.$refs.popup.close()})).catch((function(n){console.log(n)}))},setSessionKey:function(){var e=this;n.login({provider:"weixin",success:function(n){var t=n.code;(0,o.login)({code:t}).then((function(n){e.logininfo=n}))}})},navTo:function(e){n.navigateTo({url:e})},hauthLogin:function(){n.login({provider:"weixin",success:function(n){},fail:function(n){}})},authLogin:function(e){var t=this;n.login({provider:"weixin",success:function(n){var i=n.code;(0,o.login)({code:i}).then((function(n){var i={data:e.detail.encryptedData,iv:e.detail.iv,sessionKey:n.session_key};(0,o.authLogin)(i).then((function(n){var e={expires_time:n.watermark.timestamp,openid:n.openId,token:""};t.LOGIN(e),t.User(),t.hasLogin=t.$store.state.app.hasLogin})).catch((function(n){console.log(n)}))}))},fail:function(n){}})},coverTouchstart:function(n){!1!==p&&(this.coverTransition="transform .1s linear",f=n.touches[0].clientY)},coverTouchmove:function(n){l=n.touches[0].clientY;var e=l-f;e<0?this.moving=!1:(this.moving=!0,e>=80&&e<100&&(e=80),e>0&&e<=80&&(this.coverTransform="translateY(".concat(e,"px)")))},coverTouchend:function(){!1!==this.moving&&(this.moving=!1,this.coverTransition="transform 0.3s cubic-bezier(.21,1.93,.53,.64)",this.coverTransform="translateY(0px)")}})};e.default=d}).call(this,t("543d")["default"])},b318:function(n,e,t){"use strict";var o=t("6c5d"),i=t.n(o);i.a}},[["34d2","common/runtime","common/vendor"]]]);