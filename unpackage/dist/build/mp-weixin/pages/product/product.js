(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"3dd4":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("4795")),i=r(n("411c")),a=n("4d01");function r(t){return t&&t.__esModule?t:{default:t}}function s(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,r=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){r=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw i}}}}function c(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e,n,o,i,a,r){try{var s=t[a](r),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(o,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){d(a,o,i,r,s,"next",t)}function s(t){d(a,o,i,r,s,"throw",t)}r(void 0)}))}}var l=function(){n.e("components/share").then(function(){return resolve(n("93ef"))}.bind(null,n)).catch(n.oe)},h={components:{share:l},data:function(){return{titleNViewBackground:"",swiperCurrent:0,swiperLength:0,carouselList:[],goodsList:[],specClass:"none",yhqClass:"none",specSelected:[],favorite:!0,shareList:[],specList:[],specChildList:[],goodsid:0,goodInfo:[],shop:[],activity:[],fullbackgoods:[],content:"",number:1,maxnumber:1,optionid:0,type:0}},onLoad:function(t){var e=this;return f(o.default.mark((function n(){var i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.id,e.goodsid=i,e.loadData(),e.specList.forEach((function(t){var n,o=s(e.specChildList);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.pid===t.id){e.$set(i,"selected",!0),e.specSelected.push(i);break}}}catch(a){o.e(a)}finally{o.f()}})),n.next=6,e.$api.json("shareList");case 6:e.shareList=n.sent;case 7:case"end":return n.stop()}}),n)})))()},methods:{onNumberChange:function(t){if(t==this.number)return!1;this.number=t},loadData:function(){var t=this;return f(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,(0,a.getGoodDetaill)(n.goodsid).then((function(e){n.$set(n,"goodInfo",e.goods),n.$set(n,"shop",e.goods.shopdetail),n.$set(n,"activity",e.goods.activity),n.$set(n,"fullbackgoods",e.goods.fullbackgoods),n.content=e.goods.content,n.maxnumber=parseInt(e.goods.total),t.swiperLength=e.goods.thumbs.length})).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},swiperChange:function(t){var e=t.detail.current;this.swiperCurrent=e,this.titleNViewBackground=this.carouselList[e].background},tobutton:function(){var t=this.type;1==t?this.buy():this.addcart()},addcart:function(){var e=this,n=e.optionid,o=e.goodInfo.hasoption,i=e.diyform;if(o>0&&!n)t.showtoast({title:"请选择规格"});else if(e.quickbuy){if(i&&i.fields.length>0){if(!e.verify(i))return;e.formdataval={diyformdata:i.f_data}}e.addCartquick(n,e.number)}else if(i&&i.fields.length>0){if(!e.verify(i))return;(0,a.creatediyform)({id:e.goodsid,diyformdata:i.f_data}).then((function(o){(0,a.addcart)({id:e.goodsid,total:e.number,optionid:n,diyformdata:i.f_data}).then((function(n){e.goodInfo.cartcount=n.cartcount,e.active="",e.slider="out",e.specClass="none",e.tempname="",t.showToast({title:"添加成功"})()})).catch((function(e){t.showToast({title:e.message})}))})).catch((function(t){}))}else(0,a.addcart)({id:e.goodsid,total:e.number,optionid:n}).then((function(n){t.showToast({title:"添加成功"});var o=e.goodInfo;e.$set(e.goodInfo,"cartcount",n.cartcount),e.active="",e.slider="",e.goodInfo=o}))},verify:function(e){for(var n in e.fields){var o=e.fields[n],a=o.diy_type;if(1==o.tp_must)if(5==o.data_type){if(!e.f_data[a]||e.f_data[a].count<1)return t.showToast({titile:"请选择"+o.tp_name}),!1}else if(9==o.data_type){if(i.default.isEmptyObject(e.f_data[a])||!e.f_data[a].province||!e.f_data[a].city)return t.showToast({titile:"请选择"+o.tp_name}),!1}else if(10==o.data_type){if(i.default.isEmptyObject(e.f_data[a])||!e.f_data[a].name1)return t.showToast({titile:"请选择"+o.tp_name}),!1;if(!e.f_data[a].name2||""==e.f_data[a].name2)return t.showToast({titile:"请选择"+o.tp_name2}),!1}else if(11==o.data_type){if(!e.f_data[a])return t.showToast({titile:"请选择"+o.tp_name}),!1}else if(3==o.data_type){if(!e.f_data[a]||"{}"==JSON.stringify(e.f_data[a]))return t.showToast({titile:"请选择"+o.tp_name}),!1}else if(!e.f_data[a])return t.showToast({titile:"请选择"+o.tp_name}),!1;if(6==o.data_type&&!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e.f_data[a]))return t.showToast({titile:"请填写正确的"+o.tp_name}),!1;if(10==o.data_type&&(i.default.isEmptyObject(e.f_data[a])||e.f_data[a].name1!=e.f_data[a].name2))return t.showToast({titile:o.tp_name+"与"+o.tp_name2+"不一致"}),!1}return!0},toggleSpec:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.type=e,"show"===this.specClass?(this.specClass="hide",setTimeout((function(){t.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},getpicker:function(){var t=this;getPicker(t.goodsid).then((function(t){console.log(t)}))},toggleYhq:function(){var t=this;"show"===this.yhqClass?(this.yhqClass="hide",setTimeout((function(){t.yhqClass="none"}),250)):"none"===this.yhqClass&&(this.yhqClass="show")},selectSpec:function(t,e){var n=this,o=this.specChildList;o.forEach((function(t){t.pid===e&&n.$set(t,"selected",!1)})),this.$set(o[t],"selected",!0),this.specSelected=[],o.forEach((function(t){!0===t.selected&&n.specSelected.push(t)}))},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){var t=this;(0,a.toggle)(this.goodsid,this.goodInfo.isfavorite?0:1).then((function(e){t.goodInfo.isfavorite=e.isfavorite})).catch((function(t){}))},goShop:function(e){console.log(e),t.navigateTo({url:"/pages/shop/shop?id="+e})},buy:function(){var e=this,n=e.goodsid,o=e.optionid,i=e.number;0!=i?t.navigateTo({url:"/pages/order/createOrder?id=".concat(n,"&optionid=").concat(o,"&total=").concat(i)}):this.$api.msg("库存不足")},stopPrevent:function(){}}};e.default=h}).call(this,n("543d")["default"])},"40de":function(t,e,n){"use strict";n.r(e);var o=n("ffc6"),i=n("be6d");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("4b4f");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=c.exports},4157:function(t,e,n){"use strict";(function(t){n("969c");o(n("66fd"));var e=o(n("40de"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"4b4f":function(t,e,n){"use strict";var o=n("abe9"),i=n.n(o);i.a},abe9:function(t,e,n){},be6d:function(t,e,n){"use strict";n.r(e);var o=n("3dd4"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},ffc6:function(t,e,n){"use strict";var o={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"ceb7"))},uniNumberBox:function(){return n.e("components/uni-number-box/uni-number-box").then(n.bind(null,"6630"))}},i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}))}},[["4157","common/runtime","common/vendor"]]]);