(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product-miaosha"],{"1ccc":function(t,e,o){"use strict";var s={uniCountdown:function(){return o.e("components/uni-countdown/uni-countdown").then(o.bind(null,"7713"))},uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-icons/uni-icons")]).then(o.bind(null,"ceb7"))},uniNumberBox:function(){return o.e("components/uni-number-box/uni-number-box").then(o.bind(null,"6630"))}},n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return s}))},"31a1":function(t,e,o){},5426:function(t,e,o){"use strict";var s=o("31a1"),n=o.n(s);n.a},"65e1":function(o,s,n){"use strict";(function(o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=d(n("4795")),r=n("4d01"),c=n("08ad"),l=d(n("c88d"));function d(t){return t&&t.__esModule?t:{default:t}}function u(t,e,o,s,n,i,a){try{var r=t[i](a),c=r.value}catch(l){return void o(l)}r.done?e(c):Promise.resolve(c).then(s,n)}function g(t){return function(){var e=this,o=arguments;return new Promise((function(s,n){var i=t.apply(e,o);function a(t){u(i,s,n,a,r,"next",t)}function r(t){u(i,s,n,a,r,"throw",t)}a(void 0)}))}}var h=function(){n.e("components/share").then(function(){return resolve(n("93ef"))}.bind(null,n)).catch(n.oe)},m={components:{share:h},data:function(){return{num:1,show:!1,diypages:{},usediypage:!1,specs:[],options:[],goods:{},indicatorDots:!0,autoplay:!0,interval:5e3,duration:500,circular:!0,play:"/static/images/video_play.png",mute:"/static/images/icon/mute.png",voice:"/static/images/icon/voice.png",active:"",slider:"",tempname:"",info:"active",preselltimeend:"",presellsendstatrttime:"",advWidth:0,dispatchpriceObj:0,now:parseInt(Date.now()/1e3),day:0,hour:0,minute:0,min:0,sec:0,second:0,timer:0,discountTitle:"",istime:1,istimeTitle:"",isSelected:!1,params:{},total:1,optionid:0,audios:{},audiosObj:{},defaults:{id:0,merchid:0},buyType:"",pickerOption:{},specsData:[],specsTitle:"",canBuy:"",diyform:{},showPicker:!1,showcoupon:!1,pvalOld:[0,0,0],pval:[0,0,0],areas:[],noArea:!0,commentObj:{},commentObjTab:1,loading:!1,commentEmpty:!1,commentPage:1,commentTotal:1,commentLevel:"all",commentList:[],closeBtn:!1,soundpic:!0,animationData:{},uid:"",stararr:["all","good","normal","bad","pic"],nav_mask:!1,nav_mask2:!1,nav:0,giftid:"",limits:!0,modelShow:!1,showgoods:!0,titleNViewBackground:"",swiperCurrent:0,swiperLength:0,carouselList:[],goodsList:[],specClass:"none",yhqClass:"none",specSelected:[],favorite:!0,shareList:[],imgList:[],desc:"\n\t\t\t\t\n\t\t\t"}},onLoad:function(t){var e=this;return g(i.default.mark((function o(){return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.id=t.id,e.options=t,e.loadData();case 3:case"end":return o.stop()}}),o)})))()},methods:{loadData:function(){var t=this;return g(i.default.mark((function o(){var s,n;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:s=t,n=parseInt(Date.now()/1e3),(0,r.getGoodDetaill)(s.id).then((function(t){s.show=!0,s.showgoods=!1;var o=t.goods.coupons,i=(t.goods.thumbMaxHeight,t.goods.thumbMaxWidth,t.goods.goodscircle);if(s.coupon=o,s.coupon_l=o.length,s.packagegoods=t.goods.packagegoods,s.packagegoodsid=t.goods.packagegoods.goodsid||0,s.credittext=t.goods.credittext,s.activity=t.goods.activity,s.bottomFixedImageUrls=t.goods.bottomFixedImageUrls,s.phonenumber=t.goods.phonenumber,s.showDate=t.goods.showDate,s.scope=t.goods.scope||"",s.show_goods=t.goods.show_goods,s.goodscircle=i,s.goods=t.goods,s.minprice=t.goods.minprice,s.maxprice=t.goods.maxprice,s.preselltimeend=t.goods.preselltimeend,s.style=t.goods.labelstyle.style||"",s.navbar=t.goods.navbar,s.labels=t.goods.labels,t.goods.gifts&&1==t.goods.gifts.length&&s.$set(s,"giftid",t.goods.gifts[0].id),"{}"==JSON.stringify(t.goods.dispatchprice)||"string"==typeof t.goods.dispatchprice?s.$set(s,"dispatchpriceObj",0):s.$set(s,"dispatchpriceObj",1),t.goods.isdiscount>0&&t.goods.isdiscount_time>=n){clearInterval(s.timer);var a=setInterval((function(){s.countDown(0,t.goods.isdiscount_time,"istime")}),1e3);s.timer=a}else s.discountTitle="活动已结束";s.swiperLength=s.goods.thumbs.length,t.goods.istime>0&&(clearInterval(s.timer),l.default=(setInterval((function(){s.countDown(t.goods.timestart,t.goods.timeend,"istime")}),1e3),function(){throw new Error('"d" is read-only.')}()),s.timer=l.default),t.goods.ispresell>0&&(l.default=(setInterval((function(){0==t.goods.canbuy?e.countDown(n,t.goods.preselltimestart,"istime"):1==t.goods.canbuy&&e.countDown(n,t.goods.preselltimeend,"istime")}),1e3),function(){throw new Error('"d" is read-only.')}()),s.timer=l.default,s.presellisstart=t.goods.presellisstart,s.preselltimeend=t.goods.preselltimeend||t.goods.preselltimeend.getMonth()+"月"+t.goods.preselltimeend||t.goods.preselltimeend.getDate()+"日 "+t.goods.preselltimeend||t.goods.preselltimeend.getHours()+":"+t.goods.preselltimeend||t.goods.preselltimeend.getMinutes()+":"+t.goods.preselltimeend||t.goods.preselltimeend.getSeconds(),s.presellsendstatrttime=t.goods.presellsendstatrttime||t.goods.presellsendstatrttime.getMonth()+"月"+t.goods.presellsendstatrttime||t.goods.presellsendstatrttime.getDate()+"日"),t.goods.getComments>0&&(0,r.getGoodsComments)({id:s.options.id}).then((function(e){s.commentObj=t})),t.goods.fullbackgoods&&s.$set(s,"fullbackgoods",t.goods.fullbackgoods);var c=s.fullbackgoods;if(null!=c){var d=c.maxfullbackratio,u=c.maxallfullbackallratio;d=Math.round(d),u=Math.round(u),s.maxfullbackratio=d,s.maxallfullbackallratio=u}9==t.goods.type&&(s.checkedDate=t.goods.nowDate,s.show_cycelbuydate()),t.goods.seckillinfo&&s.initSeckill(t.goods)}));case 2:case"end":return o.stop()}}),o)})))()},initSeckill:function(t){var e=this,o=parseInt(t.seckillinfo.status),s=t.seckillinfo.starttime,n=t.seckillinfo.endtime;if(-1!=o){var i=0,a=0;(0,r.getMaps)().then((function(r){var c=parseInt(new Date/1e3);i=0==o?n-c:s-c,e.lasttime=i,clearInterval(e.timer),a=e.setTimer(t.seckillinfo),e.timer=a}))}},updatenumber:function(e){var s=this,n=a.goods.maxbuy,i=a.goods.minbuy,r=e;if(r>0){if(n>0&&n<=parseInt(t.detail.value)&&(r=n,o.showToast({title:"单次最多购买"+n+"件",duration:600})),i>0&&i>parseInt(t.detail.value)&&(r=i,o.showToast({title:"单次最少购买"+i+"件",duration:600})),parseInt(a.stock)<parseInt(r))return void o.showToast({title:"库存不足",duration:600})}else r=i>0?i:1;s.total=r},setTimer:function(t){var e=this,o=0;if(-1!=t.status&&parseInt(e.lasttime)%10==0){var s=parseInt(t.status),n=t.starttime,i=t.endtime;-1!=s&&(0,r.getMaps)().then((function(t){var a=parseInt(new Date/1e3);o=0==s?i-a:n-a,e.lasttime=o}))}o=parseInt(e.lasttime)-1;var a=e.formatSeconds(o);e.lasttime=o,e.hour=a.hour,e.min=a.min,e.sec=a.sec,o<=0&&e.onLoad()},formatSeconds:function(t){var e=parseInt(t),o=0,s=0;return e>60&&(o=parseInt(e/60),e=parseInt(e%60),o>60&&(s=parseInt(o/60),o=parseInt(o%60))),{hour:s,min:o,sec:e}},show_cycelbuydate:function(){var t=(0,c.getCurrentDayString)(this,this.showDate);this.currentObj=t,this.currentDate=t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日 "+["周日","周一","周二","周三","周四","周五","周六"][t.getDay()],this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.currentDay=t.getDate(),this.initDate=Date.parse(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()),this.checkedDate=Date.parse(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()),this.maxday=this.scope},countDown:function(t,e,o){var s=parseInt(Date.now()/1e3),n=parseInt((t>s?t:e)-s),i=Math.floor(n/86400),a=Math.floor((n-24*i*60*60)/3600),r=Math.floor((n-24*i*60*60-3600*a)/60),c=[i,a,r,Math.floor(n-24*i*60*60-3600*a-60*r)];if(this.time=c){var l="";t>s?l="距离限时购开始":t<=s&&e>s?l="距离限时购结束":(l="活动已经结束，下次早点来~",that.istime=0),that.istimeTitle=l}},swiperChange:function(t){var e=t.detail.current;this.swiperCurrent=e},submit:function(){var t={};""==this.canBuy&&"cart"==this.buyType&&l.default.getCart(t,this),""==this.canBuy&&"buy"==this.buyType&&l.default.buyNow(t,this,"goods_detail"),""==this.canBuy&&this.buyType},toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){t.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},toggleYhq:function(){var t=this;"show"===this.yhqClass?(this.yhqClass="hide",setTimeout((function(){t.yhqClass="none"}),250)):"none"===this.yhqClass&&(this.yhqClass="show")},selectSpec:function(t,e){var o=this,s={idx:t,info:childItem};l.default.specsTap(s,this),this.specSelected=[],list.forEach((function(t){!0===t.selected&&o.specSelected.push(t)}))},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.favorite=!this.favorite},goShop:function(){o.navigateTo({url:"/pages/shop/shop"})},buy:function(t){var e=this,o=t.currentTarget.dataset.time,s=t.currentTarget.dataset.timeout;if(("timeout"==o||"access_time"==o)&&("false"==s&&(e.goods_hint_show=!0),"true"==s)){if("access_time"==o){e.goods_hint_show=!1;var n="goodsdetail";return void l.default.selectpicker(t,e,n)}if("timeout"==o)return void e.$set(e,"goods_hint_show",!1)}n="goodsdetail",l.default.selectpicker(t,this,n)},stopPrevent:function(){}}};s.default=m}).call(this,n("543d")["default"])},"9e22":function(t,e,o){"use strict";(function(t){o("969c");s(o("66fd"));var e=s(o("bd49"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},bd49:function(t,e,o){"use strict";o.r(e);var s=o("1ccc"),n=o("cb9a");for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);o("5426");var a,r=o("f0c5"),c=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);e["default"]=c.exports},cb9a:function(t,e,o){"use strict";o.r(e);var s=o("65e1"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);e["default"]=n.a}},[["9e22","common/runtime","common/vendor"]]]);